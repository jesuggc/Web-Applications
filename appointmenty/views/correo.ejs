<!DOCTYPE html>
<html>
  <%-include('partials/head') %>
  <body class="pistachio">
    <%-include('partials/header') %>
    <div class="col" style="background-color: #BFB48F;">

      <div class="row">
        <h1 class="ms-4 my-2">Mensajes</h1>        
      </div>

      <div class="row mx-4 mb-2" style="max-height: 80vh">
        <div id="listar" class="col rounded-4 scrollable " style="background-color: whitesmoke;" >
          <div class="row text-center p-3">
            <div id="listarPrincipal" style="cursor:pointer"class="col border-end"><h4>Principal</h4></div>
            <div id="listarFavoritos" style="cursor:pointer"class="col border-end"><h4>Favoritos</h4></div>
            <div id="listarArchivados" style="cursor:pointer" class="col "><h4>Archivados</h4></div>
          </div>
          <hr style="margin-top:0">

          <% emails.forEach(ele => { %>
            <div style="cursor:pointer" class="border-bottom py-1 rowMail row mx-2 <%if(ele.leido===0) { %> noLeido <% } else { %> leido <% } %><%if(ele.favorito) { %> favorito <%}%><%if(ele.archivado) { %> archivado d-none <%}%>" data-id="<%=ele.id%>">
              <div class="col-3"><span><%=ele.admin ? ele.nombreOrigen.toUpperCase() : ele.nombreOrigen%> <%=ele.admin ? ele.apellido1.toUpperCase() : ele.apellido1%></span></div>
              <div class="col-6"><span><%=ele.asunto %></div>
              <div class="col-2"><span><%=ele.fecha%></div>
              <div class="col-1"><span><%=ele.hora%></div>
            </div>
          <% }) %>
          <br>
        </div>
        <div id="mostrar"  class=" col d-none rounded-end-4 scrollable" style="background-color: whitesmoke" >
            <button class="btn-close float-end me-2 mt-3" aria-label="Cerrar" data-bs-dismiss="lector"> </button>
          <div id="asunto" class="row d-flex justify-content-between my-3" >
              <h3>Asunto</h3>
          </div>

          <div id="fondo" class="w-50 shadow-25 row ms-3 bg-secondary rounded-3 p-2 d-flex align-items-center">
            <div class="col-2">
              <img src="/images/noPicture.jpg" alt="imagen" class="rounded-circle" style="width: 50px; height: 50px; object-fit: cover; object-position: center;">
            </div>
            <div class="col-10">
              <div id="nombre" class="row ms-1">
                <h5>Paco Martinez Ortigueira </h5>
              </div>
              <div id="correo" class="row ms-1">
                <h5>pacoma@ucm.es</h5>
              </div>
            </div>          
          </div>

          <div class="row my-3">
            <div class="col">
            </div>
            <div class="col">
              
            </div>
            <div class="col">
              <div id="fecha" style="font-weight: bold;" class="row justify-content-center ">
                24/05/2023 14:27
              </div>
              <hr class="m-0 me-2">
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="row d-flex justify-content-center">
                <div class="rounded-2 p-2" style="width:fit-content;box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px, rgba(0, 0, 0, 0.3) 0px 7px 13px -3px, rgba(0, 0, 0, 0.2) 0px -3px 0px inset;">
                  <img id="favorito" style="height:1.5em; cursor:pointer" class="mx-2" src="/images/estrella.png">
                  <img id="archivar" style="height:1.5em; cursor:pointer" class="mx-2" src="/images/archivar.png">
                  <img id="eliminar" style="height:1.5em; cursor:pointer" class="mx-2" src="/images/eliminar.png">
                </div>  
            </div>
            </div>
          </div>
          <hr>
          <div id="cuerpo" style="text-align: justify; font-family: Arial, Helvetica, sans-serif;" class="text-justify me-2 p-4 row rounded-1 ms-3">
            Lorem ipsum, dolor sit amet consectetur adipisicing elit. Corporis, eum cupiditate. Maiores facilis adipisci delectus qui. Vero facere omnis repellendus iste aliquid quia quos rem, quibusdam sunt! Impedit, reiciendis cupiditate!
          </div>
          <hr>
        </div>
      </div>
    </div>   
    <img class="nuevoCorreo" src="/images/nuevoCorreo.png">
    <div class="panelEnviar rounded-top-4 d-none">
      <button id="closeEnviar" class="btn-close-white btn-close float-end me-3 mt-3" aria-label="Cerrar" data-bs-dismiss="panelEnviar"> </button>
      <h5 class="claret rounded-top-4 text-white p-3">Nuevo mensaje </h5>
      <div contenteditable id="enviarDestinatario" class="mx-3 ">
        <p id="holderDestinatario">Para: </p>
      </div>
      <hr>
      <div contenteditable id="enviarAsunto" class="mx-3">
        <p id="holderAsunto">Asunto: </p>
      </div>
      <hr>
      <div contenteditable id="enviarCuerpo" style="height:28vh; max-height:33vh" class=" mx-3 d-flex">
        <p id="holderCuerpo">Cuerpo: </p>
      </div>
      <br>
      <div class="d-flex align-items-center mx-4">
        <button id="sendMail" type="button" class="btn btn-primary w-100">Enviar mensaje</button>
      </div>

    </div>
    <script src="../javascripts/mydriver.js"></script>
    <script src="../javascripts/mails.js"></script>
    <%-include('partials/footer') %>
  </body>
</html>
